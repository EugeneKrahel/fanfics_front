<div class="container">
  <div class="row mt-3">
    <div class="col-lg-2 col-md-1 col-sm-1"></div>
    <div class="col-lg-8 col-md-10 col-sm-10">
      <h2 style="text-align: center">{{fanfic.title | uppercase}}</h2>
      <mat-accordion>
        <mat-expansion-panel [expanded]="contentsOpenState === true"
                             (opened)="contentsOpenState = true"
                             (closed)="contentsOpenState = false"
                             *ngIf="allChapters">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Contents
            </mat-panel-title>
          </mat-expansion-panel-header>
          <p *ngFor="let chapter of allChapters">
            <button mat-button style="cursor: pointer"
                    (click)="viewChapter(chapter)">
              {{chapter.title}}
            </button>
          </p>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-divider class="mt-3 mb-3"></mat-divider>

      <div *ngIf="currentChapter">
        <h2 style="text-align: center">{{this.currentChapter.title | uppercase}}</h2>
        <markdown [data]="this.currentChapter.content" style="word-wrap: normal"></markdown>
      </div>

      <mat-divider class="mt-3 mb-3"></mat-divider>

      <div>
        <mat-accordion>
          <mat-expansion-panel (opened)="commentsOpenState = true"
                               (closed)="commentsOpenState = false"
                               *ngIf="allChapters">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Comments
              </mat-panel-title>
            </mat-expansion-panel-header>
            <form [formGroup]="newCommentForm" novalidate class="mb-5">

                  <mat-form-field class="form-field">
                    <mat-label>Write a comment</mat-label>
                    <input matInput type="text" formControlName="comment">
                    <mat-hint align="start"
                              [ngClass]="_comment.hasError('maxlength') ? 'error' : ''">{{_comment.value.length}} /
                      512
                    </mat-hint>
                    <mat-error *ngIf="_comment.hasError('required')">Comment is required</mat-error>
                    <mat-error *ngIf="_comment.hasError('maxlength')">Comment should not be longer then 256 symbols
                    </mat-error>
                  </mat-form-field>

                <button mat-button matSuffix mat-icon-button >
                  <mat-icon>send</mat-icon>
                </button>
            </form>
            <p *ngFor="let chapter of allChapters" class="mt-4">
              123
            </p>
          </mat-expansion-panel>
        </mat-accordion>
      </div>

    </div>

    <div class="col-lg-2 col-md-1 col-sm-1"></div>
  </div>
</div>
